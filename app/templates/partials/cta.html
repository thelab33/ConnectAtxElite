<section
  id="cta"
  class="connect-cta"
  role="region"
  aria-labelledby="cta-heading"
  tabindex="-1"
  aria-live="polite"
>
  <style>
    :root {
      --primary-color: #facc15;
      --secondary-bg: #0a1f44;
      --foreground-color: #f0f0f0;
      --progress-bg: #27272a;
      --progress-bar-shadow: rgba(250, 205, 21, 0.5);
    }
    .connect-cta {
      background: linear-gradient(
        100deg,
        var(--secondary-bg) 65%,
        #18181b 100%
      );
      color: var(--foreground-color);
      text-align: center;
      padding: 6rem 1.5rem 5rem;
      position: relative;
      overflow: hidden;
      z-index: 3;
    }
    .connect-cta h2 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      color: var(--primary-color);
      letter-spacing: -0.01em;
    }
    .connect-cta p {
      font-size: 1.15rem;
      margin-bottom: 1.4rem;
      color: #ffecc7;
    }
    .progress-bg {
      background-color: var(--progress-bg);
      border-radius: 9999px;
      height: 1rem;
      overflow: hidden;
      margin: 0 auto 0.5rem;
      max-width: 480px;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.09);
    }
    .progress-bar {
      background: linear-gradient(90deg, #facc15 60%, #fde68a 100%);
      box-shadow: 0 0 10px var(--progress-bar-shadow);
      height: 1rem;
      width: 0;
      border-radius: 9999px;
      transition: width 1.4s cubic-bezier(0.44, 1.23, 0.74, 1.01);
    }
    #donateBtn {
      margin-top: 1.8rem;
      padding: 0.85rem 2.4rem;
      font-size: 1.15rem;
      font-weight: 700;
      background: linear-gradient(92deg, #facc15, #ffe066 95%);
      color: #0a1f44;
      border: none;
      border-radius: 9999px;
      box-shadow: 0 0 18px var(--progress-bar-shadow);
      cursor: pointer;
      transition:
        transform 0.23s,
        background 0.22s;
      outline: none;
    }
    #donateBtn:hover,
    #donateBtn:focus {
      transform: scale(1.07);
      background: linear-gradient(92deg, #ffe066, #facc15 95%);
    }
    .sponsor-marquee {
      overflow: hidden;
      white-space: nowrap;
      margin-top: 2.5rem;
      width: 100%;
    }
    .sponsor-marquee span {
      display: inline-block;
      padding-right: 4rem;
      animation: sponsor-marquee 20s linear infinite;
      font-size: 1.07rem;
      opacity: 0.93;
      vertical-align: middle;
    }
    @keyframes sponsor-marquee {
      from {
        transform: translateX(100%);
      }
      to {
        transform: translateX(-100%);
      }
    }
    .qr-code img {
      width: 7rem;
      height: 7rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 18px rgba(0, 0, 0, 0.27);
      opacity: 0.9;
      cursor: pointer;
      background: #fff;
      border: 2px solid #fde68a;
      transition:
        opacity 0.2s,
        box-shadow 0.2s;
    }
    .qr-code img:hover {
      opacity: 1;
      box-shadow: 0 6px 24px #facc158c;
    }
    .qr-code p {
      font-size: 0.93rem;
      color: #ffecc7;
      margin-top: 0.2rem;
    }
    @media (max-width: 640px) {
      .connect-cta {
        padding: 3.7rem 0.7rem 2.5rem;
      }
      .sponsor-marquee span {
        padding-right: 2.5rem;
      }
      .qr-code img {
        width: 5rem;
        height: 5rem;
      }
    }
  </style>

  <div class="max-w-3xl mx-auto space-y-8">
    <h2 id="cta-heading">Join Our Mission</h2>
    <p>Help us empower student-athletes through your generous support.</p>

    <div
      class="progress-bg"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-valuenow="65"
      aria-label="Fundraising progress"
    >
      <div class="progress-bar" style="width: 65%"></div>
    </div>
    <p>
      <strong style="color: #fff; font-size: 1.2em">$6,500</strong>
      raised of
      <strong style="color: #fff; font-size: 1.2em">$10,000</strong>
      goal
    </p>

    <div
      id="countdown"
      role="timer"
      aria-live="polite"
      style="color: #ffe066; font-weight: 600"
    >
      <span id="cd-days">--</span>d <span id="cd-hours">--</span>h
      <span id="cd-mins">--</span>m remaining
    </div>

    <button id="donateBtn" aria-label="Donate now and help us reach our goal">
      Donate Now
    </button>

    <div class="sponsor-marquee" aria-label="Our Sponsors">
      <span>
        <img
          src="https://via.placeholder.com/100x40?text=Sponsor1"
          alt="Sponsor 1"
          height="40"
          style="vertical-align: middle; margin-right: 1rem"
        />
        <img
          src="https://via.placeholder.com/100x40?text=Sponsor2"
          alt="Sponsor 2"
          height="40"
          style="vertical-align: middle; margin-right: 1rem"
        />
        <img
          src="https://via.placeholder.com/100x40?text=Sponsor3"
          alt="Sponsor 3"
          height="40"
          style="vertical-align: middle"
        />
      </span>
    </div>

    <div class="qr-code" aria-label="Scan to donate">
      <img
        src="https://via.placeholder.com/128?text=QR+Code"
        alt="Scan to donate QR code"
        onclick="navigator.clipboard.writeText(window.location.href).then(()=>{showToast('Donation link copied!')})"
      />
      <p>Tap QR to copy donation link</p>
    </div>
  </div>

  <!-- Toast notification for QR copy -->
  <div
    id="toast-cta"
    style="
      position: fixed;
      bottom: 18%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      min-width: 160px;
      background: #18181b;
      border-radius: 1rem;
      padding: 1rem 2.3rem;
      color: #facc15;
      font-weight: 700;
      font-size: 1.05rem;
      box-shadow: 0 6px 24px #fde68a44;
      display: none;
    "
  >
    Donation link copied!
  </div>

  <script>
    function showToast(msg) {
      const toast = document.getElementById('toast-cta');
      toast.textContent = msg || 'Copied!';
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 1650);
    }

    window.addEventListener('load', () => {
      const bar = document.querySelector('.progress-bar');
      requestAnimationFrame(() => {
        bar.style.width = '65%';
      });
    });

    (() => {
      const deadline = new Date('2024-12-31T23:59:59Z'); // Update as needed!
      const dEl = document.getElementById('cd-days');
      const hEl = document.getElementById('cd-hours');
      const mEl = document.getElementById('cd-mins');
      function update() {
        const now = new Date();
        const diff = deadline - now;
        if (diff <= 0) {
          dEl.textContent = '0';
          hEl.textContent = '0';
          mEl.textContent = '0';
          return;
        }
        dEl.textContent = Math.floor(diff / (1000 * 60 * 60 * 24));
        hEl.textContent = Math.floor((diff / (1000 * 60 * 60)) % 24);
        mEl.textContent = Math.floor((diff / (1000 * 60)) % 60);
      }
      update();
      setInterval(update, 60000);
    })();

    document.getElementById('donateBtn').addEventListener('click', () => {
      import('https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/+esm').then(
        ({ default: confetti }) => {
          confetti({ particleCount: 100, spread: 70 });
        }
      );
      showToast('Thank you for supporting our mission!');
      // You can also trigger your donation modal here if desired.
    });

    const marquee = document.querySelector('.sponsor-marquee span');
    marquee.addEventListener('mouseover', () => {
      marquee.style.animationPlayState = 'paused';
    });
    marquee.addEventListener('mouseleave', () => {
      marquee.style.animationPlayState = 'running';
    });
  </script>
</section>
