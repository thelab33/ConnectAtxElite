<!doctype html>
<html lang="en" data-theme="{{ request.cookies.get('theme', 'dark') }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Connect ATX Elite{% endblock %}</title>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Connect ATX Elite",
        "url": "https://www.connectatxelite.com",
        "logo": "https://www.connectatxelite.com/static/logo.png"
      }
    </script>
    <link rel="canonical" href="https://www.connectatxelite.com/" />

    <!-- Favicons & Manifest -->
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='favicon.ico') }}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{{ url_for('static', filename='apple-touch-icon.png') }}"
    />
    <link
      rel="manifest"
      href="{{ url_for('static', filename='site.webmanifest') }}"
    />
    <meta name="theme-color" content="#facc15" />

    <!-- Preconnect & Preload -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      href="{{ url_for('static', filename='tailwind.min.css') }}"
      as="style"
      fetchpriority="high"
    />
    <link
      rel="preload"
      href="{{ url_for('static', filename='logo.png') }}"
      as="image"
      fetchpriority="high"
    />

    <!-- SEO & Social -->
    <meta
      name="description"
      content="Empowering youth through basketball, brotherhood, and academics in Austin, TX."
    />
    <meta property="og:title" content="Connect ATX Elite" />
    <meta
      property="og:description"
      content="Empowering youth through basketball, brotherhood, and academics in Austin, TX."
    />
    <meta
      property="og:image"
      content="{{ url_for('static', filename='images/social-preview.png') }}"
    />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Styles -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='tailwind.min.css') }}"
      fetchpriority="high"
    />
    {% block extra_styles %}{% endblock %}
    <style>
      :root {
        --primary: #facc15;
        --dark-bg: #18181b;
        --header-glow: 0 0 8px #facc1555;
      }
      [data-theme='dark'] {
        --dark-bg: #101015;
      }
      html,
      body {
        background: var(--dark-bg);
        color: #f0f0f0;
        scroll-behavior: smooth;
      }
      #scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        height: 4px;
        width: 0;
        background: var(--primary);
        z-index: 60;
        box-shadow: var(--header-glow);
        transition: width 0.14s cubic-bezier(0.4, 0, 0.2, 1);
      }
    </style>
  </head>
  <body
    class="flex flex-col min-h-screen antialiased bg-zinc-950 text-white selection:bg-primary selection:text-black"
  >
    <!-- Scroll Progress Bar -->
    <div id="scroll-progress" aria-hidden="true"></div>

    <!-- Skip Link for Accessibility -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only fixed top-4 left-4 bg-primary text-black px-4 py-2 rounded shadow-lg z-50 font-bold transition-all"
    >
      Skip to main content
    </a>

    <!-- Theme Toggle Button -->
    <button
      id="theme-toggle"
      aria-label="Toggle theme"
      class="fixed top-4 right-4 z-50 p-2 bg-zinc-800 rounded-full shadow hover:bg-primary/80 focus:outline-none"
    >
      ðŸŒ™
    </button>

    {% include "partials/header.html" %}

    <main
      id="main-content"
      tabindex="-1"
      class="flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"
    >
      {% block content %}{% endblock %}
    </main>

    {% include "partials/footer.html" %} {% include
    "partials/donation_modal.html" %} {% include "partials/back_to_top.html" %}
    {% include "partials/live_chat.html" ignore missing %}

    <!-- Cookie Consent Banner -->
    <div
      id="cookie-consent"
      class="fixed bottom-4 left-1/2 -translate-x-1/2 bg-zinc-800 text-white text-sm rounded-full px-6 py-3 shadow-lg hidden z-[9999]"
      role="dialog"
      aria-live="polite"
      aria-label="Cookie Consent Banner"
    >
      We use cookies.
      <a href="/privacy" class="text-primary underline">Privacy Policy</a>
      <button
        id="cookie-accept"
        class="ml-4 bg-primary text-black font-bold px-3 py-1 rounded-full shadow"
      >
        Accept
      </button>
    </div>

    <!-- Scripts -->
    <script
      src="{{ url_for('static', filename='js/bundle.min.js') }}"
      defer
    ></script>
    <script>
      // Scroll Progress Bar
      window.addEventListener('scroll', () => {
        const h = document.documentElement.scrollHeight - innerHeight;
        document.getElementById('scroll-progress').style.width =
          (scrollY / h) * 100 + '%';
      });

      // Theme Toggle
      const btn = document.getElementById('theme-toggle');
      btn.addEventListener('click', () => {
        const t =
          document.documentElement.getAttribute('data-theme') === 'dark'
            ? 'light'
            : 'dark';
        document.documentElement.setAttribute('data-theme', t);
        btn.textContent = t === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
        localStorage.theme = t;
      });
      if (localStorage.theme) {
        document.documentElement.setAttribute('data-theme', localStorage.theme);
        btn.textContent = localStorage.theme === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
      }

      // Cookie Consent
      document.addEventListener('DOMContentLoaded', () => {
        const b = document.getElementById('cookie-consent');
        if (!localStorage.cookieConsent) b.classList.remove('hidden');
        document
          .getElementById('cookie-accept')
          .addEventListener('click', () => {
            localStorage.cookieConsent = 'true';
            b.classList.add('hidden');
          });
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
